
<section class="content-header"><h1>Crime Statistics Report</h1></section>
<section class="content">
    <div class="box no-print">
        <div class="box-header with-border">
            <h3 class="box-title">
                Criteria
            </h3>
        </div>
        <div class="form-horizontal">
            <div class="box-body">
                <div class="form-group col-sm-4">
                    <label for="dateStart" class="control-label col-sm-3">Start</label>
                    <div class="col-sm-9">
                        <p-calendar [disabled]="preset != 0" name="dateStart" id="dateStart" placeholder="Start Date" [(ngModel)]="dateStart"></p-calendar>
                    </div>
                </div>
                <div class="form-group col-sm-4">
                    <label for="dateEnd" class="control-label col-sm-3">End</label>
                    <div class="col-sm-9">
                        <p-calendar [disabled]="preset != 0" name="dateEnd" id="dateEnd" placeholder="End Date" [(ngModel)]="dateEnd"></p-calendar>
                    </div>
                </div>
                <div class="form-group col-sm-4">
                    <label for="preset" class="control-label col-sm-3">Preset</label>
                    <div class="col-sm-9">
                        <select class="form-control" id="preset" [(ngModel)]="preset" (change)="presetChange()">
                            <option value="0">Custom</option>
                            <option value="1">This Year</option>
                            <option value="2">Last Year</option>
                            <option value="3">Two Years Prior</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="box-footer text-right">
                <button type="button" (click)="search()" class="btn btn-primary"><i class="fa fa-search"></i> Search</button>&nbsp;
                <button type="button" onclick="window.print()" class="btn btn-primary"><i class="fa fa-print"></i> Print</button>&nbsp;
                <button type="button" (click)="reset()" class="btn">Reset</button>
            </div>
        </div>
    </div>
    <div class="box" *ngIf="output">
        <table class="table table-striped">
            <tbody>
                <tr>
                    <th>Offense</th>
                    <th>Occurrence Date</th>
                    <th>Location Type</th>
                    <th>Count</th>
                </tr>
                <ng-template ngFor let-item [ngForOf]="output">
                    <tr>
                        <th colspan="3">{{vService.offense(item.offenseId)?.name}}</th>
                        <th>{{item.count}}</th>
                    </tr>
                    <ng-template ngFor let-child [ngForOf]="item.group">
                        <tr>
                            <td></td>
                            <td>{{child.occurrenceDate}}</td>
                            <td>{{vService.locationType(child.locationTypeId)?.name}}</td>
                            <td>{{child.count}}</td>
                        </tr>
                    </ng-template>
                </ng-template>
                
            </tbody>
        </table>
    </div>
</section>